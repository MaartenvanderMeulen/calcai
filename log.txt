python calcai.py < easy2.txt

easy2 is: (A+1)(B+2)(C+3) + ABC = 2ABC + 3AB + 2AC + BC + 6A + 3B + 2C + 6

hop 1, failed
hop 2, failed
hop 3, failed
hop 4, failed
hop 5, failed
hop 6, solved: add(sub(sub(add(mul(add(add(B, 4), sub(A, B)), add(C, B)), mul(add(A, B), C)), sub(sub(sub(sub(add(B, B), sub(mul(A, add(B, B)), C)), add(add(A, add(A, add(sub(B, C), sub(2, B)))), add(A, B))), add(add(add(B, 4), sub(A, B)), add(A, B))), A)), B), mul(mul(A, add(B, B)), C))
hop 7, failed
hop 8, solved: add(mul(mul(B, C), add(A, A)), add(mul(C, add(A, A)), add(mul(add(add(A, add(A, A)), C), B), add(add(add(A, add(A, add(A, add(A, 6)))), C), add(add(B, add(add(B, add(A, B)), A)), C)))))
hop 9, solved: add(mul(mul(B, A), add(C, add(4, C))), add(add(mul(C, B), mul(A, C)), add(add(A, add(add(5, add(add(A, add(A, add(mul(A, C), A))), add(add(mul(B, 2), sub(add(A, sub(A, 5)), mul(B, A))), C))), mul(1, B))), add(C, 6))))
hop 10, failed
hop 11, failed
hop 12, failed
hop 13, failed
hop 14, failed
hop 15, failed
hop 16, failed
hop 17, failed
hop 18, failed
hop 19, failed
hop 20, solved: sub(mul(mul(C, A), add(add(3, B), B)), sub(add(A, add(add(B, add(add(sub(sub(B, add(A, 6)), C), add(add(add(add(B, B), sub(sub(B, A), C)), add(add(sub(add(B, B), mul(sub(3, C), sub(A, B))), B), sub(B, A))), B)), sub(B, A))), B)), mul(add(A, 6), add(add(B, B), B))))

easy.txt:
(A + B - ABC) + B - (A + (2 - ((2+B+A+A)+(8*7)+(A-C))) - 7) =
A + B - ABC + B  - (A + (2 - (2+B+3A-C+8*7) - 7) =
A + B - ABC + B  - (A + (2 - (2+B+3A-C+8*7) - 7) =
-ABC + 2B - ((2 - (2+B+3A-C+8*7) - 7)) =
-ABC + 3A + 3B - C + 63 : rmse 80.2

add(sub(add(A, B), mul(A, mul(C, B))),
    sub(B,
        add(A,
            sub(sub(2,
                add(add(add(2, add(B, A)), A), add(mul(8, 7), sub(A, C)))), 7))))
                
                
sub(add(add(add(add(9, add(5, add(mul(8, 7), sub(A, C)))), add(A, A)), B), add(B, B)), mul(mul(A, C), B))
(9+5+8*7+A-C+A+A+B+B+B) - ACB =
-ABC + 3A + 3B - C + 70 : rmse 80.4

==============
hop 9, error 80.1: sub(add(add(add(add(A, B), add(sub(mul(8, 8), sub(C, A)), B)), B), A), mul(mul(C, A), B))
(A+B+(8*8- (C-A))+B+B+A)-CAB
-ABC + 3A + 3B - C + 64
hop 10, error 80.1: sub(add(add(B, add(B, 6)), add(add(A, B), add(add(8, A), add(add(sub(2, C), mul(8, 6)), A)))), mul(mul(A, C), B))

=============== medium ==============================
sub(mul(B, mul(C, A)), sub(mul(C, sub(C, B)), sub(sub(sub(sub(A, mul(B, sub(C, A))), sub(C, C)), protected_div(mul(sub(sub(sub(sub(C, C), B), add(protected_div(A, C), add(C, 2))), B), 6), add(6, C))), protected_div(mul(protected_div(protected_div(B, B), B), sub(sub(mul(6, sub(C, B)), mul(B, sub(sub(C, A), A))), sub(sub(B, C), C))), A))))

sub(
    mul(B, mul(C, A)), == ABC
    sub(
        mul(C, sub(C, B)), == C(C-B)
        sub(
            sub(
                sub(sub(A, mul(B, sub(C, A))), sub(C, C)), == A-B(C-A)
                protected_div(
                    mul(sub(sub(sub(sub(C, C), B), add(protected_div(A, C), add(C, 2))), B), 6), == ((((0-B)-((A/C)+(C+2)))-B)6)
                    add(6, C)) == 6+C
            ),
            protected_div(
                mul(protected_div(protected_div(B, B), B), sub(sub(mul(6, sub(C, B)), mul(B, sub(sub(C, A), A))), sub(sub(B, C), C))),
                A)
        )
    )
)

sub(ABC, sub((C(C-B)), sub(sub(((A-(B(C-A))), protected_div(mul(sub(sub(sub(sub(C, C), B), add(protected_div(A, C), add(C, 2))), B), 6), add(6, C))), protected_div(mul(protected_div(protected_div(B, B), B), sub(sub(mul(6, sub(C, B)), mul(B, sub(sub(C, A), A))), sub(sub(B, C), C))), A))))

hop 1, error 1.6: sub(mul(B, mul(C, A)), sub(mul(C, sub(C, B)), sub(sub(sub(sub(A, mul(B, sub(C, A))), sub(C, C)), protected_div(mul(sub(sub(sub(sub(C, C), B), add(protected_div(A, C), add(C, 2))), B), 6), add(6, C))), protected_div(mul(protected_div(protected_div(B, B), B), sub(sub(mul(6, sub(C, B)), mul(B, sub(sub(C, A), A))), sub(sub(B, C), C))), A))))
hop 2, error 453.5: mul(sub(sub(mul(A, B), sub(sub(sub(sub(C, B), protected_div(C, sub(sub(B, protected_div(C, A)), protected_div(C, sub(C, A))))), protected_div(add(sub(A, B), add(add(sub(A, B), add(A, A)), A)), sub(C, protected_div(A, C)))), protected_div(add(A, add(A, A)), add(sub(C, A), add(protected_div(A, 2), C))))), sub(sub(C, protected_div(A, add(sub(C, sub(B, protected_div(C, C))), A))), A)), C)
hop 3, error 1318.8: mul(add(sub(add(sub(add(protected_div(add(C, C), 5), mul(C, B)), add(5, add(5, add(5, add(5, add(9, C)))))), A), add(5, add(5, add(5, C)))), B), A)
hop 4, error 300.7: mul(add(sub(B, C), add(protected_div(sub(sub(protected_div(sub(add(add(5, B), B), protected_div(sub(C, A), protected_div(5, C))), A), C), add(sub(C, 8), C)), protected_div(A, 8)), add(protected_div(A, 8), add(protected_div(sub(A, C), protected_div(A, protected_div(C, 3))), add(protected_div(A, 8), mul(C, B)))))), A)
hop 5, error 7.1: add(mul(sub(mul(B, A), C), C), sub(mul(A, B), sub(sub(protected_div(sub(sub(protected_div(sub(2, mul(A, A)), sub(mul(5, 2), C)), mul(8, sub(add(6, B), sub(C, 8)))), sub(sub(mul(B, A), C), protected_div(sub(6, mul(A, B)), sub(mul(5, 2), C)))), mul(4, A)), A), 6)))
hop 6, error 12.7: mul(add(add(add(mul(C, B), protected_div(sub(add(7, sub(C, sub(C, A))), protected_div(A, sub(4, 9))), sub(add(7, sub(A, 6)), protected_div(A, sub(add(sub(B, C), B), 9))))), protected_div(add(add(mul(add(sub(C, A), sub(C, A)), add(C, C)), protected_div(5, sub(B, mul(4, C)))), sub(mul(C, sub(C, A)), sub(B, C))), sub(A, mul(6, A)))), sub(B, C)), A)
hop 7, error 12.2: sub(mul(mul(C, A), B), add(sub(sub(C, 9), A), add(sub(sub(C, 8), 7), add(add(add(add(mul(A, sub(C, B)), add(C, C)), C), mul(C, sub(2, 7))), mul(C, sub(C, A))))))
hop 8, error 1584.7: mul(sub(sub(mul(C, B), sub(C, A)), protected_div(protected_div(mul(C, protected_div(sub(mul(C, B), protected_div(protected_div(mul(C, C), 6), B)), 6)), B), B)), A)
hop 9, error 5.7: mul(add(protected_div(mul(C, C), sub(protected_div(sub(protected_div(A, B), B), mul(B, A)), B)), add(protected_div(A, B), add(protected_div(B, add(protected_div(mul(B, 7), mul(5, 5)), mul(5, C))), add(A, mul(A, C))))), B)
hop 10, error 423.1: add(mul(B, mul(A, C)), sub(sub(sub(sub(sub(sub(sub(mul(sub(B, C), A), mul(4, C)), sub(4, mul(A, protected_div(A, 5)))), mul(protected_div(C, A), add(add(add(C, C), A), mul(A, 9)))), protected_div(8, A)), sub(mul(sub(C, protected_div(mul(protected_div(C, A), sub(B, C)), 9)), 3), mul(A, 9))), sub(mul(4, C), mul(A, 9))), add(protected_div(9, C), mul(4, add(protected_div(mul(protected_div(A, C), add(A, mul(A, protected_div(A, 5)))), mul(4, C)), mul(4, C))))))
hop 11, error 660.9: add(mul(mul(A, B), C), protected_div(sub(B, C), protected_div(B, mul(add(protected_div(add(protected_div(mul(C, C), sub(mul(C, 2), A)), add(mul(C, sub(A, C)), protected_div(mul(C, C), sub(1, 8)))), sub(B, C)), add(A, 6)), B))))
hop 12, error 5.9: sub(mul(C, mul(B, A)), add(sub(sub(sub(sub(protected_div(B, sub(protected_div(sub(B, 4), C), 8)), mul(B, A)), protected_div(B, A)), 8), A), mul(C, C)))
hop 13, error 4.7: mul(add(sub(sub(add(add(protected_div(add(A, 5), sub(sub(B, 2), protected_div(sub(A, B), sub(3, A)))), add(C, protected_div(mul(4, 2), C))), A), mul(protected_div(C, B), C)), C), mul(C, A)), B)
hop 14, error 12.7: sub(mul(mul(A, B), C), mul(add(add(A, protected_div(protected_div(B, A), A)), add(protected_div(B, sub(protected_div(mul(sub(C, A), 7), B), sub(C, mul(7, C)))), protected_div(add(add(sub(sub(sub(C, A), C), B), B), mul(sub(C, A), C)), sub(C, B)))), sub(C, B)))
hop 15, error 380.3: add(mul(protected_div(C, B), sub(sub(protected_div(A, add(protected_div(B, B), mul(protected_div(9, protected_div(A, 3)), sub(sub(7, A), sub(sub(B, C), add(9, 9)))))), C), A)), mul(sub(add(add(add(add(mul(C, A), mul(protected_div(9, add(C, C)), sub(sub(7, C), B))), sub(A, C)), B), sub(mul(protected_div(9, sub(B, 6)), mul(protected_div(9, B), sub(sub(B, C), C))), C)), protected_div(sub(mul(protected_div(sub(A, C), B), sub(sub(sub(sub(B, 6), 9), C), A)), C), sub(B, C))), B))
hop 16, error 3064.5: mul(add(protected_div(B, 8), mul(C, B)), A)
hop 17, error 1.8: add(sub(add(protected_div(add(add(add(sub(B, 8), B), C), add(add(add(B, B), add(add(B, B), protected_div(C, protected_div(A, B)))), B)), C), protected_div(sub(B, C), protected_div(B, mul(A, B)))), add(mul(sub(A, C), sub(add(1, sub(B, C)), add(protected_div(B, B), B))), sub(sub(C, A), add(5, C)))), mul(C, mul(A, B)))
hop 18, error 593.8: mul(sub(mul(B, A), add(add(sub(add(protected_div(add(sub(sub(9, B), B), C), sub(4, B)), C), A), sub(protected_div(7, protected_div(add(protected_div(sub(4, B), C), C), sub(1, A))), add(protected_div(sub(sub(A, protected_div(C, B)), B), sub(9, B)), B))), add(protected_div(sub(4, sub(add(mul(add(A, 4), protected_div(B, B)), sub(4, B)), B)), C), C))), C)
hop 19, error 10.5: sub(mul(C, mul(A, B)), sub(mul(add(protected_div(mul(A, B), mul(2, add(sub(B, C), mul(A, C)))), sub(C, protected_div(mul(A, mul(B, 2)), mul(C, 2)))), C), add(add(B, protected_div(add(mul(sub(A, C), A), B), mul(mul(C, 2), C))), sub(A, 6))))
hop 20, error 604.8: sub(mul(mul(B, A), C), mul(9, add(mul(protected_div(C, add(B, add(mul(5, sub(C, A)), 5))), protected_div(C, 4)), add(mul(5, sub(add(C, protected_div(add(A, add(B, B)), C)), B)), add(mul(5, sub(C, A)), add(C, protected_div(add(B, add(B, 9)), add(mul(sub(A, 6), sub(C, A)), C))))))))

